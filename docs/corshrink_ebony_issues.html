<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Kushal K Dey" />


<title>CorShrink on Ebony issues : 1968</title>

<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<link rel="stylesheet" href="cosmo.css" type="text/css" />

</head>

<body>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:100,300,400,600" rel="stylesheet" type="text/css">
    <link href="../docs/cosmo.css" rel="stylesheet">
    <link href="../docs/cosmo.min.css" rel="stylesheet">
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="../docs/bootstrap/js/bootstrap.min.js"></script>

<body>

<div class = "nav" align = "middle">
<div class= "p1"></div>
<p>
  <a class="btn btn-large btn btn-primary" type="button" href = "index.html">CorShrink</a>
  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;
  <a class="btn btn-large btn btn-primary" type="button" href = "workflow.html">HOME</a>
  &nbsp &nbsp
  <a class="btn btn-large btn btn-primary" type="button" href = "workflow_project.html">WORKFLOW</a>
  &nbsp &nbsp
  <a class="btn btn-large btn btn-primary" type="button" href = "about.html">METHODS</a>
  &nbsp &nbsp
  <a class="btn btn-large btn btn-primary" type="button" href = "https://github.com/kkdey/CorShrink">SOFTWARE</a>
  &nbsp &nbsp
  <a class="btn btn-large btn btn-primary" type="button" href = "license.html">LICENSE</a>
   &nbsp &nbsp
  <a class="btn btn-large btn btn-primary" type="button" href = "https://github.com/kkdey/CorShrink-pages">GITHUB</a>
 </p>
</div>
<!-- <div class="nav">
  <a href="index.html">Home page</a> &nbsp &nbsp
  <a href="musings.html">Musings</a> &nbsp &nbsp
  <a href="town.html">My town</a> &nbsp &nbsp
  <a href="links.html">Links</a>
</div> -->

<!-- Main content -->
</body>
</html>


<h1 class="title toc-ignore">CorShrink on Ebony issues : 1968</h1>
<h4 class="author"><em>Kushal K Dey</em></h4>
<h4 class="date"><em>5/30/2018</em></h4>


<div id="TOC">
<ul>
<li><a href="#martin-luther-king">Martin Luther King</a></li>
<li><a href="#vietnam">Vietnam</a></li>
<li><a href="#civil-rights">Civil rights</a></li>
<li><a href="#sessioninfo">SessionInfo</a></li>
</ul>
</div>

<p>We look at CorShrink similarity measures and corresponding rankings of words and compare them with the empirical similarity and rankings without the <strong>CorShrink</strong> model. We pick two topic words to focus on - <em>martin luther king</em>, <em>vietnam</em> and <em>civil rights</em> and then perform bagging on all the different articles.</p>
<div id="martin-luther-king" class="section level2">
<h2>Martin Luther King</h2>
<pre class="r"><code>mat &lt;- get(load(&quot;../output/word2vec_Ebony_newspapers/martin_luther_king_corshrink_newspapers.rda&quot;))
cor_original &lt;- mat$original
corshrink_mat &lt;- mat$corshrink</code></pre>
<pre class="r"><code>word_frequencies_mat &lt;- get(load(&quot;../output/word2vec_Ebony/word_frequencies.rda&quot;))
word_presence_absence &lt;- word_frequencies_mat
word_presence_absence[word_presence_absence &gt; 0] = 1</code></pre>
<pre class="r"><code>matched_word_frequencies &lt;- word_presence_absence[, match(rownames(corshrink_mat), colnames(word_presence_absence))]</code></pre>
<pre class="r"><code>num_occurrences_words &lt;- colSums(matched_word_frequencies)</code></pre>
<pre class="r"><code>num_occurrence_matrix &lt;- sapply(num_occurrences_words, function(l) pmin(l, num_occurrences_words))</code></pre>
<pre class="r"><code>word_pairs &lt;- combn(colnames(cor_original),2)</code></pre>
<pre class="r"><code>df1 &lt;- data.frame(&quot;original&quot; = cor_original[lower.tri(cor_original)],
                 &quot;corshrink&quot; = corshrink_mat[lower.tri(corshrink_mat)],
                 &quot;nsamp&quot; = num_occurrence_matrix[lower.tri(num_occurrence_matrix)])
df1$nsamp[which(is.na(df1$nsamp))] = max(df1$nsamp, na.rm = TRUE)

colfunc &lt;- colorRampPalette(c(&quot;lightcyan&quot;, &quot;darkcyan&quot;))
plot(df1$original, df1$corshrink, bg = 2, col = colfunc(12)[df1$nsamp], pch = 19, cex = 1, xlab = &quot;cosine similarity&quot;, ylab = &quot;corshrink similarity&quot;, ylim = c(-0.5,1))
abline(0,1)

ids &lt;- which(df1$original &gt; 0.6)
ids2 &lt;- order(df1$original - df1$corshrink, decreasing = TRUE)[1:20]
terms &lt;- paste0(word_pairs[1,ids], &quot;:&quot;, word_pairs[2,ids])
terms2 &lt;- paste0(word_pairs[1,ids2], &quot;:&quot;, word_pairs[2,ids2])
text(df1$original[ids], df1$corshrink[ids], terms,cex = 0.5)</code></pre>
<p><img src="corshrink_ebony_issues_files/figure-html/unnamed-chunk-7-1.png" width="480" /></p>
<pre class="r"><code>tmp &lt;- sort(corshrink_mat[&quot;martin_luther_king&quot;,], decreasing = TRUE)[1:30]
names2 &lt;- setdiff(names(tmp), c(&quot;martin_luther_kings&quot;, &quot;dr_kings&quot;, &quot;luther&quot;))
aa &lt;- tmp[match(names2, names(tmp))]
aa[1:20]</code></pre>
<pre><code>## martin_luther_king      assassination           thursday 
##          1.0000000          0.3535663          0.3101434 
##               baez            beloved        nationality 
##          0.2991863          0.2913269          0.2348352 
##              death               king              grief 
##          0.2153953          0.2137205          0.2006771 
##                rev              brawl               reeb 
##          0.1943223          0.1940207          0.1852525 
##             headed             wright               whit 
##          0.1781186          0.1778320          0.1746063 
##             albert             nathan         injunction 
##          0.1675022          0.1539193          0.1532850 
##             carter          premature 
##          0.1505520          0.1502884</code></pre>
<pre class="r"><code>tmp &lt;- sort(cor_original[&quot;martin_luther_king&quot;,], decreasing = TRUE)[1:30]
names2 &lt;- setdiff(names(tmp), c(&quot;martin_luther_kings&quot;, &quot;dr_kings&quot;, &quot;luther&quot;))
aa &lt;- tmp[match(names2, names(tmp))]
aa[1:20]</code></pre>
<pre><code>## martin_luther_king            beloved          mckissick 
##          1.0000000          0.5290535          0.5125512 
##               baez                rev        nationality 
##          0.5115412          0.5005528          0.4859384 
##            apostle      assassination       assassinated 
##          0.4850871          0.4843161          0.4710754 
##           jamaican               joan               king 
##          0.4580745          0.4463965          0.4435554 
##                fpo              death           newcomer 
##          0.4213931          0.4187649          0.4150089 
##          requested              floyd            matthew 
##          0.4129952          0.4056032          0.3962165 
##              fiery               late 
##          0.3926891          0.3909103</code></pre>
</div>
<div id="vietnam" class="section level2">
<h2>Vietnam</h2>
<pre class="r"><code>mat &lt;- get(load(&quot;../output/word2vec_Ebony_newspapers/vietnam_corshrink_newspapers.rda&quot;))
cor_original &lt;- mat$original
corshrink_mat &lt;- mat$corshrink</code></pre>
<pre class="r"><code>word_frequencies_mat &lt;- get(load(&quot;../output/word2vec_Ebony/word_frequencies.rda&quot;))
word_presence_absence &lt;- word_frequencies_mat
word_presence_absence[word_presence_absence &gt; 0] = 1</code></pre>
<pre class="r"><code>matched_word_frequencies &lt;- word_presence_absence[, match(rownames(corshrink_mat), colnames(word_presence_absence))]</code></pre>
<pre class="r"><code>num_occurrences_words &lt;- colSums(matched_word_frequencies)</code></pre>
<pre class="r"><code>num_occurrence_matrix &lt;- sapply(num_occurrences_words, function(l) pmin(l, num_occurrences_words))</code></pre>
<pre class="r"><code>word_pairs &lt;- combn(colnames(cor_original),2)</code></pre>
<pre class="r"><code>df1 &lt;- data.frame(&quot;original&quot; = cor_original[lower.tri(cor_original)],
                 &quot;corshrink&quot; = corshrink_mat[lower.tri(corshrink_mat)],
                 &quot;nsamp&quot; = num_occurrence_matrix[lower.tri(num_occurrence_matrix)])
df1$nsamp[which(is.na(df1$nsamp))] = max(df1$nsamp, na.rm = TRUE)

colfunc &lt;- colorRampPalette(c(&quot;lightcyan&quot;, &quot;darkcyan&quot;))
plot(df1$original, df1$corshrink, bg = 2, col = colfunc(12)[df1$nsamp], pch = 19, cex = 1, xlab = &quot;cosine similarity&quot;, ylab = &quot;corshrink similarity&quot;, ylim = c(-0.5,1))
abline(0,1)

ids &lt;- which(df1$original &gt; 0.6)
ids2 &lt;- order(df1$original - df1$corshrink, decreasing = TRUE)[1:20]
terms &lt;- paste0(word_pairs[1,ids], &quot;:&quot;, word_pairs[2,ids])
terms2 &lt;- paste0(word_pairs[1,ids2], &quot;:&quot;, word_pairs[2,ids2])
text(df1$original[ids], df1$corshrink[ids], terms,cex = 0.5)</code></pre>
<p><img src="corshrink_ebony_issues_files/figure-html/unnamed-chunk-16-1.png" width="480" /></p>
<pre class="r"><code>tmp &lt;- sort(corshrink_mat[&quot;vietnam&quot;,], decreasing = TRUE)[1:30]
names2 &lt;- setdiff(names(tmp), c(&quot;ietnam&quot;))
aa &lt;- tmp[match(names2, names(tmp))]
aa[1:20]</code></pre>
<pre><code>##    vietnam        war   infantry  submarine      corso  criminals 
##  1.0000000  0.5386164  0.3808399  0.3563602  0.3467475  0.3166957 
##      korea senegalese  homefront   draftees       raul    brigade 
##  0.3119768  0.2867804  0.2663929  0.2494299  0.2412500  0.2319872 
## allowances   adjusted   platoons   pentagon     mortar  battalion 
##  0.2292183  0.2270523  0.2238198  0.2232487  0.2206783  0.2201875 
##      wound  stationed 
##  0.2185645  0.2171871</code></pre>
<pre class="r"><code>tmp &lt;- sort(cor_original[&quot;vietnam&quot;,], decreasing = TRUE)[1:30]
names2 &lt;- setdiff(names(tmp), c(&quot;ietnam&quot;))
aa &lt;- tmp[match(names2, names(tmp))]
aa[1:20]</code></pre>
<pre><code>##    vietnam        war     combat   infantry       binh    veteran 
##  1.0000000  0.5388774  0.5325257  0.4781490  0.4690420  0.4671037 
##    wounded  submarine      korea   airborne      corso       raul 
##  0.4660362  0.4625806  0.4604579  0.4590019  0.4513956  0.4337358 
##  stationed senegalese      dying    soldier  criminals       army 
##  0.4315332  0.4306750  0.4275406  0.4146945  0.4096768  0.4016124 
##    brigade   adjusted 
##  0.3999226  0.3992514</code></pre>
</div>
<div id="civil-rights" class="section level2">
<h2>Civil rights</h2>
<pre class="r"><code>mat &lt;- get(load(&quot;../output/word2vec_Ebony_newspapers/civil_rights_corshrink_newspapers.rda&quot;))
cor_original &lt;- mat$original
corshrink_mat &lt;- mat$corshrink</code></pre>
<pre class="r"><code>word_frequencies_mat &lt;- get(load(&quot;../output/word2vec_Ebony/word_frequencies.rda&quot;))
word_presence_absence &lt;- word_frequencies_mat
word_presence_absence[word_presence_absence &gt; 0] = 1</code></pre>
<pre class="r"><code>matched_word_frequencies &lt;- word_presence_absence[, match(rownames(corshrink_mat), colnames(word_presence_absence))]</code></pre>
<pre class="r"><code>num_occurrences_words &lt;- colSums(matched_word_frequencies)</code></pre>
<pre class="r"><code>num_occurrence_matrix &lt;- sapply(num_occurrences_words, function(l) pmin(l, num_occurrences_words))</code></pre>
<pre class="r"><code>word_pairs &lt;- combn(colnames(cor_original),2)</code></pre>
<pre class="r"><code>df1 &lt;- data.frame(&quot;original&quot; = cor_original[lower.tri(cor_original)],
                 &quot;corshrink&quot; = corshrink_mat[lower.tri(corshrink_mat)],
                 &quot;nsamp&quot; = num_occurrence_matrix[lower.tri(num_occurrence_matrix)])
df1$nsamp[which(is.na(df1$nsamp))] = max(df1$nsamp, na.rm = TRUE)

colfunc &lt;- colorRampPalette(c(&quot;lightcyan&quot;, &quot;darkcyan&quot;))
plot(df1$original, df1$corshrink, bg = 2, col = colfunc(12)[df1$nsamp], pch = 19, cex = 1, xlab = &quot;cosine similarity&quot;, ylab = &quot;corshrink similarity&quot;, ylim = c(-0.5,1))
abline(0,1)

ids &lt;- which(df1$original &gt; 0.6)
ids2 &lt;- order(df1$original - df1$corshrink, decreasing = TRUE)[1:20]
terms &lt;- paste0(word_pairs[1,ids], &quot;:&quot;, word_pairs[2,ids])
terms2 &lt;- paste0(word_pairs[1,ids2], &quot;:&quot;, word_pairs[2,ids2])
text(df1$original[ids], df1$corshrink[ids], terms,cex = 0.5)</code></pre>
<p><img src="corshrink_ebony_issues_files/figure-html/unnamed-chunk-25-1.png" width="480" /></p>
<pre class="r"><code>tmp &lt;- sort(corshrink_mat[&quot;civil_rights&quot;,], decreasing = TRUE)[1:30]
names2 &lt;- setdiff(names(tmp), c(&quot;civil&quot;, &quot;rights&quot;))
aa &lt;- tmp[match(names2, names(tmp))]
aa[1:20]</code></pre>
<pre><code>## civil_rights     movement      workers  documentary      leaders 
##    1.0000000    0.5000871    0.4247906    0.2585608    0.2525841 
##     national  legislation     democrat  involvement   separatist 
##    0.2507434    0.2492312    0.2392148    0.2302046    0.2205221 
##    political      freedom   nonviolent       andrew        aided 
##    0.2146423    0.2043344    0.2042810    0.2012858    0.1906563 
##     kennedys      federal     revealed       tucker     politics 
##    0.1817611    0.1769108    0.1744746    0.1741423    0.1721833</code></pre>
<pre class="r"><code>tmp &lt;- sort(cor_original[&quot;civil_rights&quot;,], decreasing = TRUE)[1:30]
names2 &lt;- setdiff(names(tmp), c(&quot;civil&quot;, &quot;rights&quot;))
aa &lt;- tmp[match(names2, names(tmp))]
aa[1:20]</code></pre>
<pre><code>## civil_rights     movement      workers  legislation       morrow 
##    1.0000000    0.6362527    0.4956718    0.4498891    0.4441932 
##     kennedys    movements       andrew      freedom coordinating 
##    0.4414409    0.4242074    0.4142487    0.4115721    0.3985884 
##   separatist  involvement       voices     distress     schwemer 
##    0.3956887    0.3956219    0.3940182    0.3934538    0.3870820 
##      leaders  documentary       anthem      goodman        aided 
##    0.3860711    0.3855880    0.3848378    0.3809568    0.3787624</code></pre>
</div>
<div id="sessioninfo" class="section level2">
<h2>SessionInfo</h2>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 3.5.0 (2018-04-23)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Sierra 10.12.6
## 
## Matrix products: default
## BLAS: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## loaded via a namespace (and not attached):
##  [1] compiler_3.5.0  backports_1.1.2 magrittr_1.5    rprojroot_1.3-2
##  [5] tools_3.5.0     htmltools_0.3.6 yaml_2.1.19     Rcpp_0.12.17   
##  [9] stringi_1.2.2   rmarkdown_1.9   knitr_1.20      stringr_1.3.1  
## [13] digest_0.6.15   evaluate_0.10.1</code></pre>
</div>

<hr>
<p>
    This <a href="http://rmarkdown.rstudio.com">R Markdown</a> site was created with <a href="https://github.com/jdblischak/workflowr">workflowr</a>
</p>
<hr>

<!-- To enable disqus, uncomment the section below and provide your disqus_shortname -->

<!-- disqus
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'rmarkdown'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
-->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
